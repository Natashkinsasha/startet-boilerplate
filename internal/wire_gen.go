// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package internal

import (
	"context"
	huma2 "github.com/danielgtaylor/huma/v2"
	redis2 "github.com/redis/go-redis/v9"
	"go.uber.org/zap"
	grpc2 "google.golang.org/grpc"
	"net/http"
	"starter-boilerplate/internal/shared/app"
	"starter-boilerplate/internal/shared/config"
	"starter-boilerplate/internal/shared/db"
	"starter-boilerplate/internal/shared/grpc"
	"starter-boilerplate/internal/shared/huma"
	"starter-boilerplate/internal/shared/jwt"
	"starter-boilerplate/internal/shared/logger"
	"starter-boilerplate/internal/shared/middleware"
	"starter-boilerplate/internal/shared/redis"
	"starter-boilerplate/internal/shared/server"
	"starter-boilerplate/internal/user"
)

// Injectors from initialize.go:

func InitializeApp(ctx context.Context) *app.App {
	serveMux := server.SetupMux()
	configConfig := config.SetupConfig()
	appConfig := configConfig.App
	httpServer := server.SetupHTTPServer(serveMux, appConfig)
	dbConfig := configConfig.DB
	loggerConfig := configConfig.Logger
	zapLogger := logger.SetupLogger(loggerConfig)
	bunDB := db.Setup(ctx, dbConfig, zapLogger)
	api := huma.Setup(serveMux, appConfig)
	grpcConfig := configConfig.GRPC
	grpcServer := grpc.Setup(grpcConfig, zapLogger)
	jwtConfig := configConfig.JWT
	manager := jwt.NewJWTManager(jwtConfig)
	init := middleware.Setup(httpServer, api, manager)
	module := user.InitializeUserModule(bunDB, api, grpcServer, manager, init)
	redisConfig := configConfig.Redis
	client := redis.Setup(ctx, redisConfig, zapLogger)
	appApp := newApp(httpServer, configConfig, module, zapLogger, client, grpcServer, api)
	return appApp
}

// initialize.go:

func newApp(httpSrv *http.Server, cfg *config.Config, _ user.Module, _ *zap.Logger, _ *redis2.Client, grpcSrv *grpc2.Server, api huma2.API) *app.App {
	return app.New(httpSrv, cfg, grpcSrv, api)
}
